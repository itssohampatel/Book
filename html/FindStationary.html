<!DOCTYPE html>
<html>
<head>
	<title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
	<link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">

	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

	<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.11/css/mdb.min.css" rel="stylesheet">
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.11/js/mdb.min.js"></script>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://j11y.io/demos/plugins/jQuery/autoresize.jquery.js"></script>	
</head>
<style type="text/css">
	body{
		padding-bottom: 200px;
		overflow-x: hidden;
	}
	.colorChange{
		background-color: #E0E0E0;
	}
	.paddi{
		padding-left: 2vw;		
		padding-right: 2vw;		
		padding-top: 2vh;		
	}
	.mh{
		font-weight: 500;
		font-family:unset;
	}
	.btn{
		background-color: #FAFAFA;
		border-radius: 5px;
	}
	.bookname{
		text-transform: uppercase;
		font-weight: 400;
		color: #343a40;
	}
	.type{
		text-transform: uppercase;
		color: #212121;
	}
	.background{
		background-color: #f0f4f7;
		padding:40px; 
		border-radius: 10px; 
	}
	.imageshow{
		width: 40%;
		height:40vh;
		z-index: 100;
		position: absolute;	
		left: 30%;
		top: 15%;
		display: none;
	}
	.imageshow img{
		width: 100%;
		height: auto;
	}
	@media only screen and (max-width: 786px){
		 	.paddi{
				padding: 10px;
			}
		}
</style>
<body>
	<div class="row  paddi">
	</div>
	<center>
		<div class="container imageshow" id="imageshow">
			<img id="showimg" src="../img/s721678816.jpg">
		</div>
	</center>
	<div class="container-fluid" id="txthere">
	</div>


<script type="text/javascript">
	function fun(){
		$("#myModal").modal('show');
	}
	window.parent.search.addEventListener('keyup',function(e){
		var check=[];
			var container=document.getElementById('txthere');
			container.innerHTML='';
		    if(window.parent.search.value!=''){
				var check=[];
			    var container=document.getElementById('txthere');
			    var xmlhttp1 = new XMLHttpRequest();
			     xmlhttp1.onreadystatechange = function() {  
			          console.log(this.responseText);
			      if (this.readyState == 4 && this.status == 200 && this.responseText!="") {
			        var obj=JSON.parse(this.responseText);
			        for (var i = 0; i < obj.length; i++){
			         check[i]=[];
				      check[i][0]=obj[i].cpid;
		        	  check[i][1]=obj[i].cpname; 
		          	  check[i][2]=obj[i].cpdis;
		        	  check[i][3]=obj[i].cpau; 
		        	  check[i][4]=obj[i].cpaddi; 
		        	  check[i][5]=obj[i].cpsc; 
		          var txt='<div class="row paddi"><div class="container"><div class="row"><div class="col-md-12 background mask waves-effect "><div class="row"><div class="col-md-3 imageho"><img onmouseover="imgdshow(this.src)"  src="../img/'+check[i][0]+'.jpg"width="150" height="150"></div>';
		     	     txt+='<div class="col-md-3"><h3 class="bookname">'+check[i][1]+'</h3><br><p style="font-size: 15px;"><b>TYPE&nbsp;:&nbsp;</b><span class="type">Book</span></p> <p style="font-size: 15px;"><b>Product Id:- &nbsp;:&nbsp;</b><span class="type">'+check[i][0]+'</span></p><p style="font-size: 15px;"><b>Author Name:&nbsp;&nbsp;</b><span class="type">'+check[i][3]+'</span></p> </div>';  
		txt+='<div class="col-md-3"></div><div class="col-md-3"><p style="font-size: 15px;"><b> Addition:&nbsp;&nbsp;</b><span class="type">'+check[i][4]+'</span></p><b> Subject code:&nbsp;&nbsp;</b><span class="type">'+check[i][5]+'</span></p><p style="font-size: 15px;"><b>Discription&nbsp;:&nbsp;</b><span class="type">'+check[i][1]+'</span></p><button type="button" class="btn btn-primary" onclick='+'valid("'+check[i][0]+'")'+'>Request</button></div></div></div></div></div></div>';
					container.innerHTML+=txt;	
			        }
			      }
			  };
			  xmlhttp1.open("POST", "../php/ajax.php", true);
			  xmlhttp1.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
			  xmlhttp1.send("work=readBooks");
		}
		    else{
				container.innerHTML='';	
		    		var xmlhttp1 = new XMLHttpRequest();
		    		     xmlhttp1.onreadystatechange = function() {  
		    		      if (this.readyState == 4 && this.status == 200 && this.responseText!="") {
		    		        var obj=JSON.parse(this.responseText);
		    		        for (var i = 0; i < obj.length; i++){
		    		          check[i]=[];
						      check[i][0]=obj[i].cpid;
				        	  check[i][1]=obj[i].cpname; 
				          	  check[i][2]=obj[i].cpdis;
				        	  check[i][3]=obj[i].cpau; 
				        	  check[i][4]=obj[i].cpaddi; 
				        	  check[i][5]=obj[i].cpsc; 
				          var txt='<div class="row paddi"><div class="container"><div class="row"><div class="col-md-12 background mask waves-effect "><div class="row"><div class="col-md-3 imageho"><img onmouseover="imgdshow(this.src)"  src="../img/'+check[i][0]+'.jpg"width="150" height="150"></div>';
				     	     txt+='<div class="col-md-3"><h3 class="bookname">'+check[i][1]+'</h3><br><p style="font-size: 15px;"><b>TYPE&nbsp;:&nbsp;</b><span class="type">Book</span></p> <p style="font-size: 15px;"><b>Product Id:- &nbsp;:&nbsp;</b><span class="type">'+check[i][0]+'</span></p><p style="font-size: 15px;"><b>Author Name:&nbsp;&nbsp;</b><span class="type">'+check[i][3]+'</span></p> </div>';  
						txt+='<div class="col-md-3"></div><div class="col-md-3"><p style="font-size: 15px;"><b> Addition:&nbsp;&nbsp;</b><span class="type">'+check[i][4]+'</span></p><b> Subject code:&nbsp;&nbsp;</b><span class="type">'+check[i][5]+'</span></p><p style="font-size: 15px;"><b>Discription&nbsp;:&nbsp;</b><span class="type">'+check[i][1]+'</span></p><button type="button" class="btn btn-primary" onclick='+'valid("'+check[i][0]+'")'+'>Request</button></div></div></div></div></div></div>';
							container.innerHTML+=txt;	
		    		        }
		    		      }
		    		  };
		    		  xmlhttp1.open("POST", "../php/ajax.php", true);
		    		  xmlhttp1.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		    		  xmlhttp1.send("work=srachfindBook&src="+window.parent.search.value);
		    			}
		});
	/*var txt='<div class="row paddi"><div class="container"><div class="row"><div class="col-md-12 background mask waves-effect "><div class="row"><div class="col-md-3"><img src=""/Books/img/book2.jpg" width="150" height="150"></div>';

	var txt='<div class="col-md-3"><h3 class="bookname">book of destiny</h3><br> <p style="font-size: 15px;"><b>TYPE&nbsp;:&nbsp;</b><span class="type">Book</span></p><p style="font-size: 15px;"><b>Author&nbsp;:&nbsp;</b><span class="type">Mar Novu</span></p> --></div>'   
	
	var txt='<div class="col-md-3"></div><div class="col-md-3"><br><br><p style="font-size: 15px;"><b>Discription&nbsp;:&nbsp;</b><span class="type">lakkd aj asdda ladns asxlkaND ADLKANDA LKANND ALDN</span></p></div></div></div></div></div></div>';*/
   function funcall(tp=19){
	var check=[];
    var container=document.getElementById('txthere');
    var xmlhttp1 = new XMLHttpRequest();
     xmlhttp1.onreadystatechange = function() {  
      if (this.readyState == 4 && this.status == 200 && this.responseText!=""){
        var obj=JSON.parse(this.responseText);
        for (var i = 0; i < obj.length; i++){
          check[i]=[];
		      check[i][0]=obj[i].cpid;
        	  check[i][1]=obj[i].cpname; 
          	  check[i][2]=obj[i].cpdis;
        	  check[i][3]=obj[i].cpau; 
        	  check[i][4]=obj[i].cpaddi; 
        	  check[i][5]=obj[i].cpsc; 
          var txt='<div class="row paddi"><div class="container"><div class="row"><div class="col-md-12 background mask waves-effect "><div class="row"><div class="col-md-3 imageho"><img onmouseover="imgdshow(this.src)"  src="../img/'+check[i][0]+'.jpg"width="150" height="150"></div>';
     	     txt+='<div class="col-md-3"><h3 class="bookname">'+check[i][1]+'</h3><br><p style="font-size: 15px;"><b>TYPE&nbsp;:&nbsp;</b><span class="type">Book</span></p> <p style="font-size: 15px;"><b>Product Id:- &nbsp;:&nbsp;</b><span class="type">'+check[i][0]+'</span></p><p style="font-size: 15px;"><b>Author Name:&nbsp;&nbsp;</b><span class="type">'+check[i][3]+'</span></p> </div>';  
txt+='<div class="col-md-3"></div><div class="col-md-3"><p style="font-size: 15px;"><b> Addition:&nbsp;&nbsp;</b><span class="type">'+check[i][4]+'</span></p><b> Subject code:&nbsp;&nbsp;</b><span class="type">'+check[i][5]+'</span></p><p style="font-size: 15px;"><b>Discription&nbsp;:&nbsp;</b><span class="type">'+check[i][1]+'</span></p><button type="button" class="btn btn-primary" id="'+check[i][0]+'" onclick='+'valid("'+check[i][0]+'")'+'>Request</button></div></div></div></div></div></div>';
			container.innerHTML+=txt;	
        }
      }
  };
  xmlhttp1.open("POST", "../php/ajax.php", true);
  xmlhttp1.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xmlhttp1.send("work=readBooks");
}
$(document).ready(function(){
	funcall();
});
function imgdshow(src){
		//alert(src);
			 $('#showimg').attr('src',src);
//			 document.getElementById('imageshow').style.display='block';
}
			 $('#imageshow').click(function(){
				 document.getElementById('imageshow').style.display='none';
			 });

function valid(pid){
        $.ajax({
            url:'../php/requestlist.php',
            data:{
                pid:pid
            },
            type:"POST",
            success:function(a,b){
        // 		alert(a);
                if(a=="success"){
                    alert("success");
		  		    document.getElementById(pid).disabled=true;
                }else
                alert(a);
              }
        });
        return false;
}
</script>
</body>
</html>

<!-- <div class="row paddi">
			<div class="container">
				<div class="row">
					<div class="col-md-12 background mask waves-effect ">
						<div class="row">
							<div class="col-md-3">
								<img src="../img/bell" width="150" height="150">
							</div>
							<div class="col-md-3">
								<h3 class="bookname">book of destiny</h3>
								<br>
						    	<p style="font-size: 15px;"><b>TYPE&nbsp;:&nbsp;</b><span class="type">Book</span></p>
						    	<p style="font-size: 15px;"><b>Author&nbsp;:&nbsp;</b><span class="type">Mar Novu</span></p>
							</div>
							<div class="col-md-3"></div>
							<div class="col-md-3">
								<br>
								<br>
						    	<p style="font-size: 15px;"><b>Discription&nbsp;:&nbsp;</b><span class="type">lakkd aj asdda ladns asxlkaND ADLKANDA LKANND ALDN</span></p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div> -->